<!DOCTYPE html>
<html>
<head>
<link href='css/fullcalendar.css' rel='stylesheet' />
<link href='css/fullcalendar.print.css' rel='stylesheet' media='print' />
<link href='css/buttons.css' rel='stylesheet' type='text/css' media='screen, projection' />
<link href='css/style.css' rel='stylesheet' type='text/css' />
<link href='css/classic.css' rel='stylesheet' type='text/css' />
<link href='css/classic.date.css' rel='stylesheet' type='text/css' />
<link href='css/jquery-ui.css' rel='stylesheet' type='text/css' />
<script src='contrib/jquery.min.js' type='text/javascript'></script>
<script src='contrib/jquery-ui.custom.min.js' type='text/javascript'></script>
<script src='contrib/picker.js' type='text/javascript'></script>
<script src='contrib/picker.date.js' type='text/javascript'></script>
<script src='contrib/fullcalendar.js' type='text/javascript'></script>
<script src='contrib/rdflib.js' type='text/javascript'></script>
<script src='contrib/sha1.js' type='text/javascript'></script>
<script src='js/ld-cal.js' type='text/javascript'></script>
</head>

<body>
    <div id="spinner" >
        <div class="blockG" id="rotateG_01">
        </div>
        <div class="blockG" id="rotateG_02">
        </div>
        <div class="blockG" id="rotateG_03">
        </div>
        <div class="blockG" id="rotateG_04">
        </div>
        <div class="blockG" id="rotateG_05">
        </div>
        <div class="blockG" id="rotateG_06">
        </div>
        <div class="blockG" id="rotateG_07">
        </div>
        <div class="blockG" id="rotateG_08">
        </div>
        <div class="spinner-text"><p>Working...</p></div>
    </div>
    <div class="center">
        <div id="mask"></div>
    </div>
    <div id="topnav" class="top-nav center">
        <span class="title" title="Home"><a href="#">Linked Data Calendar</a></span>
        <div id="me" class="user-info"></div>
    </div>
    <div class="container" id="main-container">
        <div class="content">
            <div id="calendar"></div>
        </div>
    </div>
    <!-- Event editor -->
    <div id="editevent" class="editevent" style="display: none;">
        <input type="hidden" name="id" id="id" value="" />
        <div>  
            <span class="span-left cell inline-block"><strong>Event name</strong></span>        
            <div class="left cell inline-block"> <input type="text" name="title" id="title" class="text left" autofocus /></div>
        </div>
        <div>
            <span class="span-left cell inline-block">Starts</span>
            <div id="startDay" class="left cell inline-block"><input type="text" id="pickerStart" class="text left" /></div>
        </div>
        <div>
            <span class="span-left cell inline-block">Ends</span>
            <div id="endDay" class="left cell inline-block"><input type="text" id="pickerEnd" class="text left" /></div>
        </div>
        <div id="duration" class="duration">
            <div id="timepicker" class="timepicker"></div>
            <div class="right"><span class="span-right cell inline-block">All day?</span><input type="checkbox" name="allday" id="allDay" class="right" onclick="toggleHours()" /></div>
        </div>
        <div class="editor-buttons force-left">
            <div class="left"><a href="#" class="button button-rounded button-flat-primary" onclick="saveEvent()"><i class="icon-save"></i> Save</a></div>
            <div class="left actions"><a href="#" class="button button-rounded button-flat-highlight" onclick="$('#editevent').hide()"><i class="icon-remove"></i> Cancel</a></div>
        </div>
        <div class="editor-buttons-right">
            <div class="right actions"><a href="#" class="button button-rounded button-flat-caution" onclick="deleteEvent()"><i class="icon-remove"></i> Delete</a></div>
        </div>
        
        <div id="colorpicker" class="colorpicker">
            <span class="span-left cell inline-block">Pick a color</span>
            <div class="right inline-block">
                <div id="Blue" class="Blue" onclick="setColor('#5484ed')"></div>
                <div id="Red" class="Red" onclick="setColor('#e52127')"></div>
                <div id="Green" class="Green" onclick="setColor('#51b749')"></div>
                <div id="Yellow" class="Yellow" onclick="setColor('#fbd75b')"></div>
                <div id="Purple" class="Purple" onclick="setColor('#dbadff')"></div>
            </div>
        </div>
    </div>
    <script>
    // ----- Modify if needed ------
    var proxy_template = "https://rww.io/proxy?uri={uri}";

    // ----- DO NOT MODIFY BELOW -------
    // User's WebID
    var mywebid;
    var mygraph;

    // ------------------- UI and initialization ---------------
    $(document).ready(function() {
        var uri = getCalPath(new Date(), undefined, 'events');
        new $.ajax({
            type: 'head',
            url: uri,
            complete: function(request, textStatus) {
                webid = request.getResponseHeader('User');
                if ((webid) && (webid.slice(0, 4) == 'http')) {
                    // check if the user is authenticated
                    mywebid = webid;
                    userInfo(webid, "me");
                    // render
                } else {
                    // not authenticated
                    var html = $('<div class="user left">Welcome, <strong>unknown user</strong>!</div>'+
                                '<div class="user-pic right">'+
                                    '<img src="img/nouser.png" title="unknown user" class="login-photo img-border" />'+
                                '</div>');
                    $('#me').append(html);
                }
                if (textStatus == 'error')
                    render();
                else
                    loadRemote(uri);

            }
        });
    });
    </script>
</body>
</html>
